# 电子学习资源存储平台

基于 Vue 3 + Express + Multer 开发的电子学习资源存储网站，支持完整的文件上传与下载功能。

## ✨ 项目特性

- 🌐 **现代化前端**: Vue 3 + Vite + Vue Router
- 🚀 **完整后端**: Express + Multer 文件服务
- 📁 **文件存储**: 实际文件上传到本地file文件夹
- 📥 **文件下载**: 支持原文件名下载，多文件独立下载
- 🗑️ **文件管理**: 上传、下载、删除完整功能
- 📦 **多文件上传**: 支持批量上传，统一资源管理
- 🎯 **多选类型**: 资源类型支持多选checkbox
- 🔤 **中文支持**: 完美解决中文文件名乱码
- 📱 **响应式设计**: 适配PC端访问
- 🌓 **日夜间模式**: 全局主题切换，保护用户视力
- 🔐 **用户系统**: 登录验证和资源归属管理
- ⚡ **性能优化**: 代码简化，用户体验提升
- 🎨 **现代化界面**: CSS变量系统，流畅的主题过渡动画

## 🎯 支持的文件格式

- 📊 PPT: `.ppt`, `.pptx`
- 📄 Word: `.doc`, `.docx`
- 📑 PDF: `.pdf`
- 📚 电子书: `.epub`, `.mobi`, `.txt`
- 🎥 视频: `.mp4`, `.avi`, `.mov`
- 📦 压缩包: `.zip`, `.rar`, `.7z`, `.tar`, `.gz`（作为文件格式支持）
- 📎 其他格式: 支持任意文件格式上传
- 📁 **多文件批量**: 支持同时上传多个不同格式文件

## 🚀 快速开始

### 环境要求

- Node.js 16+
- npm 或 yarn

### 安装依赖

```bash
npm install
```

### 启动服务

#### 方式1: 一键启动（推荐）
```bash
npm start
```

#### 方式2: 分别启动
```bash
# 终端1: 启动后端
npm run server

# 终端2: 启动前端
npm run dev
```

#### 访问地址
- 🖥️ 前端页面: http://localhost:5173
- 🔧 后端API: http://localhost:3001

### 测试账号

- 👤 用户名: `student1`, 密码: `123456`
- 👤 用户名: `student2`, 密码: `123456`

## 📋 功能模块

### 1. 🏠 首页
- **轮播图展示**: 使用本地学习相关主题图片，支持手动左右切换
- **交互式轮播**: 左右箭头切换、底部指示器点击跳转
- **热门资源推荐**: 展示最新上传的学习资源
- **快速导航**: 便捷的页面跳转链接

### 2. 📚 资源库
- 展示所有学习资源
- 按类型筛选（PPT/Word/PDF/电子书/视频/其他）
- 按时间筛选（年份/月份精准筛选）
- 资源搜索功能
- 智能空状态提示
- 筛选结果计数显示

### 3. 📤 资源上传
- **多文件上传**: 支持同时选择多个文件上传
- **多选资源类型**: 资源类型支持多选checkbox形式（PPT、Word、PDF、电子书、视频、其他）
- **文件选择和上传**: 点击选择多个文件，支持多种格式
- **资源信息填写**: 资源名称、多选类型、描述信息
- **上传进度提示**: 实时显示上传状态和文件选择情况
- **智能文件管理**: 多文件统一管理为一个资源记录
- **自动跳转**: 上传完成后自动跳转到资源库

### 4. 📄 资源详情
- 查看完整资源信息
- **多文件管理**: 文件列表展示，每个文件独立下载
- **智能下载状态**: 显示下载进度，防止重复下载
- **批量删除支持**: 删除确认显示文件数量
- 编辑和删除（仅限上传者）

### 5. 👤 个人中心
- 用户信息展示
- 个人上传资源管理
- 统计信息

## 🛠 技术栈

### 前端技术
- **Vue 3**: Composition API
- **Vue Router 4**: 路由管理
- **Vite**: 构建工具
- **CSS**: 原生样式
- **localStorage**: 元数据存储

### 后端技术
- **Express.js**: Web服务器
- **Multer**: 文件上传中间件
- **CORS**: 跨域支持
- **Node.js fs**: 文件系统操作

## 📁 项目结构

```
电子学习资源平台/
├── src/                    # 前端源码
│   ├── components/         # 公共组件
│   │   ├── Navbar.vue        # 导航栏
│   │   ├── ResourceCard.vue  # 资源卡片
│   │   └── ResourceFilter.vue # 筛选器组件
│   ├── views/             # 页面组件
│   │   ├── Login.vue       # 登录页
│   │   ├── Home.vue        # 首页
│   │   ├── ResourceLibrary.vue # 资源库
│   │   ├── ResourceUpload.vue  # 上传页
│   │   ├── ResourceDetail.vue  # 详情页
│   │   └── Profile.vue     # 个人中心
│   ├── router/            # 路由配置
│   ├── App.vue           # 根组件
│   ├── main.js           # 入口文件
│   └── style.css         # 全局样式
├── file/                # 文件存储目录
├── server.js            # 后端服务器
├── package.json         # 项目配置
├── vite.config.js       # Vite配置
└── index.html          # 入口HTML
```

## 📚 电子书格式说明

### 支持的电子书格式
- 📖 **EPUB**: `.epub` - 最通用的电子书格式
- 📱 **MOBI**: `.mobi` - Kindle设备格式  
- 📝 **TXT**: `.txt` - 纯文本格式

### 电子书类型优势
- 📱 多设备兼容阅读
- 📖 适配各种阅读器
- 💾 文件体积小，传输快速
- 🔍 支持目录和搜索功能

## 🕒 时间筛选功能

### 功能特点
- 📅 **年份筛选**：自动获取所有资源上传年份，支持倒序排列
- 📆 **月份筛选**：选择年份后可进一步按月份筛选
- 🎯 **组合筛选**：支持类型+时间多重筛选组合
- 🔄 **联动筛选**：月份选择依赖于年份选择
- 📊 **实时统计**：显示当前筛选条件下的资源数量
- 🔄 **一键重置**：快速清除所有筛选条件

### 使用场景
- 📚 查找某年某月上传的学习资料
- 🎯 精准定位特定时间段的资源
- 📈 分析资源上传时间分布
- 🔍 按时间回溯历史学习资源

## 🔄 核心流程

### 文件上传流程
1. 用户选择文件并填写信息
2. 前端验证表单数据
3. 调用后端上传接口
4. 后端接收文件并存储到file文件夹
5. 返回文件信息给前端
6. 前端保存元信息到localStorage

### 文件下载流程
1. 用户点击下载按钮
2. 前端调用下载接口
3. 后端读取对应文件
4. 设置正确响应头
5. 触发浏览器下载

### 资源管理
- **存储策略**: 时间戳 + 原文件名
- **元数据**: localStorage存储资源信息
- **权限控制**: 上传者可删除自己的资源
- **文件大小**: 最大100MB限制（支持大型文件）
- **多文件处理**: 支持批量上传，统一资源管理
- **中文编码**: 完美支持中文文件名，无乱码问题
- **批量删除**: 支持多文件同时删除，智能确认提示
- **下载优化**: 独立文件下载状态管理

## 📡 API 接口

### 后端服务: http://localhost:3001

| 接口 | 方法 | 说明 |
|------|------|------|
| `/api/health` | GET | 健康检查 |
| `/api/upload` | POST | 文件上传 |
| `/api/download/:filename` | GET | 文件下载 |
| `/api/delete/:filename` | DELETE | 文件删除 |
| `/file/*` | GET | 静态文件访问 |

## 🛠 开发指南

### 开发模式
```bash
npm run dev
```

### 构建生产版本
```bash
npm run build
```

### 预览生产版本
```bash
npm run preview
```

## 🏗️ 代码架构优化

### 组件化设计
- **ResourceFilter.vue**: 独立的筛选器组件
- **props/emit**: 标准化的父子组件通信
- **scoped样式**: 组件级样式隔离
- **可复用性**: 筛选器可在其他页面复用

### 状态管理
- **computed属性**: 自动响应的数据计算
- **数据流**: 单向数据流，避免状态混乱
- **组件通信**: 通过事件进行父子组件数据传递

### 用户体验优化
- **智能提示**: 根据筛选条件显示不同空状态消息
- **实时反馈**: 筛选结果计数实时更新
- **操作便捷**: 一键重置所有筛选条件
- **交互合理**: 月份选择依赖年份选择

### 代码质量
- **单一职责**: 每个组件专注特定功能
- **命名规范**: 清晰的方法和变量命名
- **注释完善**: 关键逻辑添加必要注释
- **性能优化**: 避免不必要的重渲染

## ⚙️ 配置说明

### 前端配置 (vite.config.js)
- 端口: 5173
- 代理: 无需配置，直接访问后端

### 后端配置 (server.js)
- 端口: 3001
- 文件大小: 100MB（支持大型压缩包文件）
- 存储路径: ./file/
- 编码支持: UTF-8中文文件名处理

## 🔧 常见问题

### Q: 文件上传失败
A: 检查后端是否运行，文件大小是否超限

### Q: 文件名显示乱码
A: 服务器已处理中文编码，如有问题请重启服务

### Q: 下载文件名不正确
A: 服务器自动提取原始文件名，确保使用最新版本

### Q: 端口冲突
A: 修改server.js的PORT或vite.config.js的端口配置

## 📝 更新日志

### v1.4.0
- ✅ **轮播图交互**: 添加手动左右切换和底部指示器功能
- ✅ **日夜间模式**: 全局主题切换，自动保存用户偏好设置
- ✅ **CSS变量系统**: 统一的样式管理，支持平滑主题过渡动画
- ✅ **响应式优化**: 所有组件完美适配日夜间模式变化
- ✅ **现代化界面**: 流畅的主题切换动画和交互效果
- ✅ **用户体验提升**: 轮播图完全可手动控制，主题状态持久化

### v1.4.1 (代码优化版本)
- ✅ **代码精简**: 删除重复和冗余的CSS样式
- ✅ **样式优化**: 全面使用CSS变量，提升主题一致性
- ✅ **文件清理**: 删除lunhuantupian空文件夹和重复文件
- ✅ **性能提升**: 移除不必要的全局样式，减少CSS体积
- ✅ **组件化**: 优化scoped样式，提升代码维护性

### v1.3.0
- ✅ **多文件上传**: 支持同时选择和上传多个文件
- ✅ **多选资源类型**: 资源类型从单选改为多选checkbox形式（去掉压缩包类型）
- ✅ **文件名修复**: 完美解决中文文件名乱码问题
- ✅ **文件大小提升**: 最大文件限制提升至100MB
- ✅ **智能管理**: 多文件统一资源管理
- ✅ **UI优化**: 多文件列表显示，checkbox样式优化
- ✅ **详情页优化**: 支持多文件分别下载，显示文件大小
- ✅ **下载状态优化**: 独立文件下载状态，防重复下载
- ✅ **删除功能增强**: 支持多文件批量删除，显示确认文件数量
- ✅ **代码优化**: 简化条件判断，移除冗余代码，提升性能
- ✅ **错误处理完善**: 更好的错误提示和异常处理机制
- ✅ **首页轮播图更新**: 使用本地学习主题图片，提升视觉体验

### v1.2.0
- ✅ 新增时间筛选功能（年份/月份）
- ✅ 创建可复用筛选器组件
- ✅ 智能空状态提示系统
- ✅ 筛选结果实时计数
- ✅ 优化代码结构和组件化
- ✅ 响应式筛选器布局

### v1.1.0
- ✅ 新增电子书资源类型
- ✅ 支持EPUB、MOBI、TXT格式
- ✅ 更新文件类型筛选器
- ✅ 优化文件名处理逻辑
- ✅ 简化项目结构和代码

### v1.0.0
- ✅ 完整文件上传下载功能
- ✅ 用户登录和权限管理
- ✅ 响应式界面设计
- ✅ 中文文件名支持
- ✅ 文件大小限制
- ✅ 资源分类筛选

## 🤝 贡献

欢迎提交 Issue 和 Pull Request 来改进项目。

## 📄 许可证

MIT License

---
#   s t u d y _ p l a t f o r r m  
 